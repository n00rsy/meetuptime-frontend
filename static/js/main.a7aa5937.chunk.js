(this.webpackJsonpwhenmeet=this.webpackJsonpwhenmeet||[]).push([[0],{17:function(e){e.exports=JSON.parse('{"backendApi":"https://whenmeet.azurewebsites.net"}')},48:function(e,t,n){},52:function(e,t,n){},78:function(e,t,n){},82:function(e,t,n){},88:function(e,t,n){"use strict";n.r(t);var a=n(1),s=n(0),c=n.n(s),o=n(24),r=n.n(o),i=(n(48),n(64),function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,95)).then((function(t){var n=t.getCLS,a=t.getFID,s=t.getFCP,c=t.getLCP,o=t.getTTFB;n(e),a(e),s(e),c(e),o(e)}))}),l=n(31),d=n(8),u=n(7),j=n(23),h=n(13),m=n.n(h),b=n(93),p=n(6),v=n(42),O=n.n(v);n(78);function g(e){var t=e.selectedDates,n=e.setselectedDates;return Object(a.jsx)("div",{children:Object(a.jsx)(O.a,{selectedDays:t,onDayClick:function(e,a){var s=a.selected,c=Object(p.a)(t);if(s){var o=c.findIndex((function(t){return v.DateUtils.isSameDay(t,e)}));c.splice(o,1)}else c.push(e);n(c)},month:new Date})})}function x(e){var t=e.selectedDays,n=e.setSelectedDays,c=Object(j.a)({reValidateMode:"onChange"}).register;return Object(s.useEffect)((function(){t.forEach((function(e){document.getElementsByName(e)[0].checked=!0}))})),Object(a.jsxs)("div",{className:"days-wrapper",onChange:function(e){var a=Object(p.a)(t);if(e.target.checked)a.push(e.target.name);else{var s=a.findIndex((function(t){return t===e.target.name}));a.splice(s,1)}n(a)},children:[Object(a.jsxs)("div",{className:"day-container",style:{paddingLeft:"0rem"},children:[Object(a.jsx)("label",{className:"day-label",for:"sun",children:"Sun"}),Object(a.jsx)("input",{id:"sun",className:"day",type:"checkbox",placeholder:"Sunday",name:"0",ref:c})]}),Object(a.jsxs)("div",{className:"day-container",children:[Object(a.jsx)("label",{className:"day-label",for:"mon",children:"Mon"}),Object(a.jsx)("input",{id:"mon",className:"day",type:"checkbox",placeholder:"Monday",name:"1",ref:c})]}),Object(a.jsxs)("div",{className:"day-container",children:[Object(a.jsx)("label",{className:"day-label",for:"tue",children:"Tue"}),Object(a.jsx)("input",{id:"tue",className:"day",type:"checkbox",placeholder:"Tuesday",name:"2",ref:c})]}),Object(a.jsxs)("div",{className:"day-container",children:[Object(a.jsx)("label",{className:"day-label",for:"wed",children:"Wed"}),Object(a.jsx)("input",{id:"wed",className:"day",type:"checkbox",placeholder:"Wednesday",name:"3",ref:c})]}),Object(a.jsxs)("div",{className:"day-container",children:[Object(a.jsx)("label",{className:"day-label",for:"thu",children:"Thu"}),Object(a.jsx)("input",{id:"thu",className:"day",type:"checkbox",placeholder:"Thursday",name:"4",ref:c})]}),Object(a.jsxs)("div",{className:"day-container",children:[Object(a.jsx)("label",{className:"day-label",for:"fri",children:"Fri"}),Object(a.jsx)("input",{id:"fri",className:"day",type:"checkbox",placeholder:"Friday",name:"5",ref:c})]}),Object(a.jsxs)("div",{className:"day-container",children:[Object(a.jsx)("label",{className:"day-label",for:"sat",children:"Sat"}),Object(a.jsx)("input",{id:"sat",className:"day",type:"checkbox",placeholder:"Saturday",name:"6",ref:c})]})]})}var f=n(17),y=m.a.tz.names();function w(){var e=Object(s.useState)(!0),t=Object(u.a)(e,2),n=t[0],c=t[1],o=Object(s.useState)([]),r=Object(u.a)(o,2),i=r[0],l=r[1],h=Object(s.useState)([]),p=Object(u.a)(h,2),v=p[0],O=p[1],w=Object(s.useState)(null),N=Object(u.a)(w,2),T=N[0],C=N[1],S=Object(s.useState)(!1),M=Object(u.a)(S,2),D=M[0],E=M[1],k=Object(j.a)({defaultValues:{timezone:m.a.tz.guess(),startTime:"9",endTime:"17",surveyUsing:"Dates"}}),R=k.register,L=k.errors,U=k.handleSubmit,A=Object(d.f)();function I(e){console.log("sending post request with: ",e),E(!0),fetch(f.backendApi+"/api/meetings",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)}).then((function(e){return console.log("raw server response:",e),E(!1),e.json()})).catch((function(){E(!1),C("Unable to create event :( Please try again later.")})).then((function(e){console.log(e),E(!1),e&&e.code?A.push("/"+e.code):C("Unable to create event :( Please try again later.")}))}function B(){return n?Object(a.jsx)(g,{selectedDates:i,setselectedDates:l}):Object(a.jsx)(x,{selectedDays:v,setSelectedDays:O})}Object(s.useEffect)((function(){T&&C(null)}),[i,v,n]);var W=function(){var e=parseInt(document.getElementsByName("startTime")[0].value);return parseInt(document.getElementsByName("endTime")[0].value)>e},P=function(e){return"Dates"===e?0===i.length?(C("Please select at least one date."),!1):!(i.length>7)||(C("You may only selct up to 7 dates."),!1):0!==v.length||(C("Please select at least one day."),!1)};return Object(a.jsxs)("form",{onSubmit:U((function(e){e.startTime=parseInt(e.startTime),e.endTime=parseInt(e.endTime),console.log("received data: ",e);var t=P(e.surveyUsing);"Dates"===e.surveyUsing&&t?(e.dates=function(e,t,n){var a=[];return e.forEach((function(e){var s=m()(e).tz(n);s.set({hour:t}),a.push(s.toISOString())})),a}(i,e.startTime,e.timezone),e.days=[],I(e)):"Days"===e.surveyUsing&&t&&(e.days=v,e.dates=[],I(e))})),className:"create-form",autoComplete:"off",children:[Object(a.jsxs)("div",{className:"text-input-container",children:[Object(a.jsx)("input",{type:"text",placeholder:"Event Name",name:"name",className:"event-name-input",ref:R({required:{value:!0,message:"You must enter an event name"},minLength:{value:1,message:"Event name must be between 1-100 characters long"},maxLength:{value:100,message:"Event name must be between 1-100 characters long"}})}),Object(a.jsx)("div",{className:"error",children:L.name&&L.name.message?L.name.message:""}),Object(a.jsx)("input",{type:"text",placeholder:"Description (optional)",name:"description",className:"event-description-input",ref:R({maxLength:{value:200,message:"Event description must be less than 200 characters long"}})}),Object(a.jsx)("div",{className:"error",children:L.description&&L.description.message?L.description.message:""})]}),Object(a.jsx)("div",{style:{display:"flex",justifyContent:"center"},children:Object(a.jsxs)("div",{className:"day-selector-container",children:[Object(a.jsxs)("div",{onChange:function(e){"Dates"===e.target.value?c(!0):c(!1)},children:[Object(a.jsx)("span",{style:{marginRight:"1rem"},children:"Survey Using:"})," ",Object(a.jsx)("input",{id:"dates",name:"surveyUsing",type:"radio",value:"Dates",style:{marginLeft:"1rem"},ref:R({required:!0})}),Object(a.jsx)("label",{for:"dates",style:{marginRight:"1rem"},children:"Dates"}),Object(a.jsx)("input",{id:"days",name:"surveyUsing",type:"radio",value:"Days",ref:R({required:!0})}),Object(a.jsx)("label",{for:"days",children:"Days"}),Object(a.jsx)("div",{style:{paddingTop:"1rem",borderBottom:"1px solid white",width:"70%",margin:"auto"}})]}),Object(a.jsx)(B,{}),Object(a.jsx)("div",{className:"error",style:{textAlign:"center"},children:T||""}),Object(a.jsx)("div",{className:"color-block"})]})}),n&&Object(a.jsxs)("div",{className:"time-container",children:["In ",Object(a.jsx)(b.a.Control,{as:"select",name:"timezone",className:"select",style:{maxWidth:"20rem",marginBottom:"1rem"},ref:R({required:!0}),children:y.map((function(e){return Object(a.jsx)("option",{children:e})}))})]}),Object(a.jsxs)("div",{className:"time-container",children:[Object(a.jsx)("span",{className:"time-select-container",children:Object(a.jsxs)("span",{style:{whiteSpace:"nowrap"},children:["From ",Object(a.jsxs)(b.a.Control,{className:"select",as:"select",name:"startTime",style:{maxWidth:"7rem",marginRight:"1rem",display:"inline",marginTop:"0.5rem"},ref:R({required:!0,validate:W}),children:[Object(a.jsx)("option",{value:"0",children:"midnight"}),Object(a.jsx)("option",{value:"1",children:" 1 am"}),Object(a.jsx)("option",{value:"2",children:" 2 am"}),Object(a.jsx)("option",{value:"3",children:" 3 am"}),Object(a.jsx)("option",{value:"4",children:" 4 am"}),Object(a.jsx)("option",{value:"5",children:" 5 am"}),Object(a.jsx)("option",{value:"6",children:" 6 am"}),Object(a.jsx)("option",{value:"7",children:" 7 am"}),Object(a.jsx)("option",{value:"8",children:" 8 am"}),Object(a.jsx)("option",{value:"9",children:" 9 am"}),Object(a.jsx)("option",{value:"10",children:" 10 am"}),Object(a.jsx)("option",{value:"11",children:" 11 am"}),Object(a.jsx)("option",{value:"12",children:" noon"}),Object(a.jsx)("option",{value:"13",children:" 1 pm"}),Object(a.jsx)("option",{value:"14",children:" 2 pm"}),Object(a.jsx)("option",{value:"15",children:" 3 pm"}),Object(a.jsx)("option",{value:"16",children:" 4 pm"}),Object(a.jsx)("option",{value:"17",children:" 5 pm"}),Object(a.jsx)("option",{value:"18",children:" 6 pm"}),Object(a.jsx)("option",{value:"19",children:" 7 pm"}),Object(a.jsx)("option",{value:"20",children:" 8 pm"}),Object(a.jsx)("option",{value:"21",children:" 9 pm"}),Object(a.jsx)("option",{value:"22",children:" 10 pm"}),Object(a.jsx)("option",{value:"23",children:" 11 pm"}),Object(a.jsx)("option",{value:"0",children:" midnight"})]})]})}),Object(a.jsx)("span",{className:"time-select-container",children:Object(a.jsxs)("span",{style:{whiteSpace:"nowrap"},children:["To ",Object(a.jsxs)(b.a.Control,{as:"select",id:"endTime",name:"endTime",className:"select",style:{maxWidth:"7rem",display:"inline",marginTop:"0.5rem"},ref:R({required:!0,validate:W}),children:[Object(a.jsx)("option",{value:"0",children:"midnight"}),Object(a.jsx)("option",{value:"1",children:" 1 am"}),Object(a.jsx)("option",{value:"2",children:" 2 am"}),Object(a.jsx)("option",{value:"3",children:" 3 am"}),Object(a.jsx)("option",{value:"4",children:" 4 am"}),Object(a.jsx)("option",{value:"5",children:" 5 am"}),Object(a.jsx)("option",{value:"6",children:" 6 am"}),Object(a.jsx)("option",{value:"7",children:" 7 am"}),Object(a.jsx)("option",{value:"8",children:" 8 am"}),Object(a.jsx)("option",{value:"9",children:" 9 am"}),Object(a.jsx)("option",{value:"10",children:" 10 am"}),Object(a.jsx)("option",{value:"11",children:" 11 am"}),Object(a.jsx)("option",{value:"12",children:" noon"}),Object(a.jsx)("option",{value:"13",children:" 1 pm"}),Object(a.jsx)("option",{value:"14",children:" 2 pm"}),Object(a.jsx)("option",{value:"15",children:" 3 pm"}),Object(a.jsx)("option",{value:"16",children:" 4 pm"}),Object(a.jsx)("option",{value:"17",children:" 5 pm"}),Object(a.jsx)("option",{value:"18",children:" 6 pm"}),Object(a.jsx)("option",{value:"19",children:" 7 pm"}),Object(a.jsx)("option",{value:"20",children:" 8 pm"}),Object(a.jsx)("option",{value:"21",children:" 9 pm"}),Object(a.jsx)("option",{value:"22",children:" 10 pm"}),Object(a.jsx)("option",{value:"23",children:" 11 pm"}),Object(a.jsx)("option",{value:"0",children:" midnight"})]})]})}),Object(a.jsx)("div",{className:"error",children:L.endTime&&"validate"===L.endTime.type||L.startTime&&"validate"===L.startTime.type?"Start time must be before end time!":""})]}),Object(a.jsx)("input",{className:"button-important",type:"submit",value:D?"CREATING EVENT!!!":"Create Event"})]})}n(82);function N(){return Object(a.jsx)("div",{className:"create-form-container",children:Object(a.jsx)(w,{})})}var T=n(9),C=n(32),S=function(e,t,n){for(var a=[],s=0;s<t;s++){for(var c=[],o=0;o<n;o++)c.push(e[M(s,o,n)]);a.push(c)}return a},M=function(e,t,n){return e*n+t},D=function(e){var t=[];return e.forEach((function(e){e.forEach((function(e){t.push(e)}))})),t},E=function(e,t){console.log("mapping matrix to this many respondents: ",t);for(var n=[],a=0;a<e.length;a++){for(var s=[],c=0;c<e[0].length;c++)0===t||0===e[a][c]?s.push("#ffffff"):1===t?s.push("#3a506b"):s.push(k(11915765,3821675,(e[a][c]-1)/(t-1)));n.push(s)}return n},k=function(e,t,n){var a=e>>16,s=e>>8&255,c=255&e;return"#"+((a+n*((t>>16)-a)<<16)+(s+n*((t>>8&255)-s)<<8)+(0|c+n*((255&t)-c))).toString(16)};function R(e){var t=e.meetingData,n=e.setMeetingData,s=e.setUserData,c=Object(j.a)(),o=c.register,r=c.errors,i=c.handleSubmit;return console.log(r),Object(a.jsxs)("form",{onSubmit:i((function(e){var a={name:e.username,password:""===e.password?null:e.password};fetch(f.backendApi+"/api/people/"+t.id,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(a)}).then((function(e){return console.log("raw server login response: ",e),e.status/100!==2?e:e.json()})).then((function(e){if(console.log("processed login data",e),null==e)console.log("null res");else if(void 0!==e.status||void 0!==e.value)console.log(e.status,e.statusText,e.value);else{e.available=S(e.available,t.numTimeslots,t.numDays);var a=function(e,t){for(var n=0;n<e.length;n++)for(var a=0;a<e[0].length;a++)e[n][a]-=!0===t[n][a]?1:0;return e}(Object(p.a)(t.availableCount),e.available),c=t.numRespondents+1;t.people.forEach((function(t){e.name===t.name&&c--})),console.log("created new person?",c-t.numRespondents),n(Object(T.a)(Object(T.a)({},t),{},{availableCount:a,colors:E(a,c),numRespondents:c})),s(e)}}))})),children:[Object(a.jsx)("p",{style:{width:"25rem"},children:"New to this event? Make up a name and password. Returning? Use the same name/ password."}),Object(a.jsx)("input",{type:"text",placeholder:"Name",name:"username",ref:o({required:{value:!0,message:"Please enter a name to sign in."},minLength:{value:1,message:"Name must be between 1-20 characters long."},maxLength:{value:20,message:"Name must be between 1-20 characters long."}})}),Object(a.jsx)("div",{className:"error",children:r.username&&r.username.message?r.username.message:""}),Object(a.jsx)("input",{type:"password",placeholder:"Password (optional)",name:"password",ref:o({required:!1,maxLength:{value:20,message:"Password must be less than 20 characters long."}})}),Object(a.jsx)("div",{className:"error",children:r.password&&r.password.message?r.password.message:""}),Object(a.jsx)("input",{type:"submit",value:"Login",className:"button-sign"})]})}function L(e){var t=e.userData,n=e.setUserData,s=e.getMeeting,c=e.meetingId;function o(){console.log("signing out"),s(),n(null)}return Object(a.jsxs)("div",{children:[Object(a.jsxs)("p",{children:["Signed in as ",Object(a.jsx)("span",{style:{fontWeight:"bold"},children:t.name})]}),Object(a.jsx)("button",{className:"button-sign",value:"signout",onClick:o,children:"sign out"}),Object(a.jsx)("button",{className:"button-text",value:"delete",onClick:function(){console.log("deleting response");var e={name:t.name,password:""===t.password?null:t.password};console.log("sending delete request with: ",e),fetch(f.backendApi+"/api/people/"+c,{method:"DELETE",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)}).then((function(e){return console.log("raw server login response: ",e),2!==Math.floor(e.status/100)?null:e})).then((function(e){return null===e?(console.log("Internal error occurred. Please try again later."),!1):(console.log(e.status,e.statusText,e.value),!0)})).then((function(e){e&&o()}))},children:"delete response"})]})}var U=n(90),A=n(91),I=n(54),B=n(58),W=n(45),P=n(47),z=n(46),V=n(55),q=n.n(V),H=function(e){Object(P.a)(n,e);var t=Object(z.a)(n);function n(){var e;Object(W.a)(this,n);for(var s=arguments.length,o=new Array(s),r=0;r<s;r++)o[r]=arguments[r];return(e=t.call.apply(t,[this].concat(o))).state={selectionStarted:!1,startRow:null,startColumn:null,endRow:null,endColumn:null,addMode:!1},e.componentDidMount=function(){console.log("table component mounting"),window.addEventListener("mouseup",e.handleTouchEndWindow),window.addEventListener("touchend",e.handleTouchEndWindow)},e.componentWillUnmount=function(){console.log("table component unmounting"),window.removeEventListener("mouseup",e.handleTouchEndWindow),window.removeEventListener("touchend",e.handleTouchEndWindow)},e.render=function(){return Object(a.jsx)("div",{className:"table-drag-select-container",children:Object(a.jsxs)("table",{className:"table-drag-select",onMouseLeave:e.handleMouseLeave,onTouchEnd:e.handleMouseLeave,children:[Object(a.jsx)("thead",{children:e.renderHeader()}),Object(a.jsx)("tbody",{children:e.renderRows()})]})})},e.renderHeader=function(){var t=[];return 3===e.props.days[0].length?e.props.days.forEach((function(e,n){return t.push(Object(a.jsx)("th",{children:e},n))})):e.props.days.forEach((function(n,s){return t.push(Object(a.jsx)("th",{children:e.dateHeader(n)},s))})),Object(a.jsx)("tr",{className:"table-header-day",children:t})},e.dateHeader=function(e){return Object(a.jsxs)("div",{children:[Object(a.jsx)("div",{className:"table-header-day",children:e.format("ddd")}),Object(a.jsx)("div",{className:"table-header-date",children:e.format("MMM D, y")})]})},e.renderRows=function(){return c.a.Children.map(e.props.children,(function(t,n){return Object(a.jsx)("tr",Object(T.a)(Object(T.a)({},t.props),{},{children:c.a.Children.map(t.props.children,(function(t,s){return e.props.editing&&null!==e.props.value?Object(a.jsx)(F,Object(T.a)(Object(T.a)({onTouchStart:e.handleTouchStartCellEditing,onTouchMove:e.handleTouchMoveCellEditing,selected:e.props.value[n][s],beingSelected:e.isCellBeingSelected(n,s),addMode:e.state.addMode,color:e.props.colors[n][s],rowNum:n},t.props),{},{children:t.props.children}),s):Object(a.jsx)(F,Object(T.a)(Object(T.a)({onTouchStart:e.handleTouchStartCellViewing,onTouchMove:e.handleTouchMoveCellViewing,selected:!1,beingSelected:e.isCellBeingSelectedViewing(n,s),addMode:e.state.addMode,color:e.props.colors[n][s],rowNum:n},t.props),{},{children:t.props.children}),s)}))}),n)}))},e.handleTouchStartCellViewing=function(e){var t=0===e.button,n="mousedown"!==e.type;(t||n)&&e.preventDefault()},e.handleTouchMoveCellViewing=function(t){t.preventDefault();var n=Y(t),a=n.row,s=n.column;e.props.setCurrentCoords({row:a,col:s}),!1===e.state.addMode&&e.setState({addMode:!0})},e.handleMouseLeave=function(){e.props.setCurrentCoords(null)},e.handleTouchStartCellEditing=function(t){var n=0===t.button,a="mousedown"!==t.type;if(!e.state.selectionStarted&&(n||a)){t.preventDefault();var s=Y(t),c=s.row,o=s.column;e.props.onSelectionStart({row:c,column:o}),e.setState({selectionStarted:!0,startRow:c,startColumn:o,endRow:c,endColumn:o,addMode:!e.props.value[c][o]})}},e.handleTouchMoveCellEditing=function(t){if(e.state.selectionStarted){t.preventDefault();var n=Y(t),a=n.row,s=n.column,c=e.state,o=c.startRow,r=c.startColumn,i=c.endRow,l=c.endColumn;if(i!==a||l!==s){var d=null===o&&null===i?0:Math.abs(a-o)+1,u=null===r&&null===l?0:Math.abs(s-r)+1;d<=e.props.maxRows&&e.setState({endRow:a}),u<=e.props.maxColumns&&e.setState({endColumn:s})}}},e.handleTouchEndWindow=function(t){var n=0===t.button,a="mousedown"!==t.type;if(e.state.selectionStarted&&(n||a)){for(var s=q()(e.props.value),c=Math.min(e.state.startRow,e.state.endRow),o=Math.max(e.state.startRow,e.state.endRow),r=c;r<=o;r++)for(var i=Math.min(e.state.startColumn,e.state.endColumn),l=Math.max(e.state.startColumn,e.state.endColumn),d=i;d<=l;d++)s[r][d]=e.state.addMode;e.setState({selectionStarted:!1}),e.props.onChange(s)}},e.isCellBeingSelected=function(t,n){var a=Math.min(e.state.startRow,e.state.endRow),s=Math.max(e.state.startRow,e.state.endRow),c=Math.min(e.state.startColumn,e.state.endColumn),o=Math.max(e.state.startColumn,e.state.endColumn);return e.state.selectionStarted&&t>=a&&t<=s&&n>=c&&n<=o},e.isCellBeingSelectedViewing=function(t,n){return e.props.currentCoords&&t===e.props.currentCoords.row&&n===e.props.currentCoords.col},e}return n}(c.a.Component);H.defaultProps={value:[],maxRows:1/0,maxColumns:1/0,onSelectionStart:function(){},onInput:function(){},onChange:function(){}};var F=function(e){Object(P.a)(n,e);var t=Object(z.a)(n);function n(){var e;Object(W.a)(this,n);for(var s=arguments.length,c=new Array(s),o=0;o<s;o++)c[o]=arguments[o];return(e=t.call.apply(t,[this].concat(c))).shouldComponentUpdate=function(t){return e.props.beingSelected!==t.beingSelected||e.props.selected!==t.selected||e.props.color!==t.color},e.componentDidMount=function(){e.td.addEventListener("touchstart",e.handleTouchStart,{passive:!1}),e.td.addEventListener("touchmove",e.handleTouchMove,{passive:!1})},e.componentWillUnmount=function(){e.td.removeEventListener("touchstart",e.handleTouchStart),e.td.removeEventListener("touchmove",e.handleTouchMove)},e.render=function(){var t=e.props,n=t.className,s=void 0===n?"":n,c=t.beingSelected,o=t.selected,r=(t.onTouchStart,t.onTouchMove,t.addMode),i=t.color,l=t.rowNum,d=Object(B.a)(t,["className","beingSelected","selected","onTouchStart","onTouchMove","addMode","color","rowNum"]),u={backgroundColor:i};s+=" cell-enabled",c?u.backgroundColor=r?"#24d1ce":"var(--alert)":o&&(u.backgroundColor="var(--highlight)");return l%4===0&&(u.borderTop="3px solid #e1e3e6"),Object(a.jsx)("td",Object(T.a)(Object(T.a)({ref:function(t){return e.td=t},className:s,onMouseDown:e.handleTouchStart,onMouseMove:e.handleTouchMove,style:u},d),{},{children:e.props.children||Object(a.jsx)("span",{children:"\xa0"})}))},e.handleTouchStart=function(t){e.props.onTouchStart(t)},e.handleTouchMove=function(t){e.props.onTouchMove(t)},e}return n}(c.a.Component),Y=function(e){var t;if(e.touches){var n=e.touches[0];t=document.elementFromPoint(n.clientX,n.clientY)}else for(t=e.target;"TD"!==t.tagName;)t=t.parentNode;return{row:t.parentNode.rowIndex-1,column:t.cellIndex}};n(52);function J(e){var t=e.startingMoment,n=e.numTimeslots,s=e.surveyUsing;function c(e){var t=e.time,n=e.count,s=e.style,c=void 0===s?{}:s;return Object(a.jsx)("tr",{children:Object(a.jsx)("th",{className:"time-table-cell",style:c,children:Object(a.jsx)("span",{children:""===t?"\xa0":t})})},n)}console.log("generating timetable",t,n);for(var o=[],r=n-1,i=m()(t,"h"),l=0;l<n;l++)if(l===r&&o.push(Object(a.jsx)(c,{count:l+1,time:""})),l%4===0||l===r){var d=i.format("h:mm A");o.push(Object(a.jsx)(c,{time:d,count:l,style:{borderTop:"3px solid white"}})),i.add(1,"hours")}else o.push(Object(a.jsx)(c,{count:l,time:""}));var u="Dates"===s?"3.9rem":"2.45rem";return Object(a.jsx)("table",{className:"time-table",children:Object(a.jsxs)("tbody",{children:[Object(a.jsx)("tr",{children:Object(a.jsx)("th",{className:"time-table-cell",style:{height:u,minHeight:u}},"s")},"s"),o]})})}function G(e,t){return e.startingMoment===t.startingMoment}var Z=c.a.memo(J,G);function Q(e){var t=e.numRespondents,n=e.people,s=e.currentCoords,c=e.moments,o=e.surveyUsing,r=[],i=[],l=" ";if(s){if("Dates"===o)l=m()(c[s.col]).add(15*s.row,"minutes").format("dddd MMM D, y @ h:mm A");else l=m()(c.days[s.col]+" "+c.startTime,"ddd H").add(15*s.row,"minutes").format("dddd @ h:mm A");n.forEach((function(e){e.available[s.row][s.col]?r.push(e.name):i.push(e.name)}))}return Object(a.jsxs)("div",{children:[Object(a.jsx)("h3",{children:"Group Availability"}),Object(a.jsxs)("h6",{children:[t," ",1===t?"Respondent":"Respondents"]}),Object(a.jsx)("p",{children:"Hover over or touch a time slot to see who's available."}),Object(a.jsx)("h6",{children:l}),s&&Object(a.jsxs)("div",{className:"group-container",children:[Object(a.jsxs)("div",{children:[Object(a.jsxs)("div",{className:"group-header",children:[r.length," Available"]}),Object(a.jsxs)("div",{className:"group-list-container",children:[r.map((function(e,t){return Object(a.jsx)("div",{children:e},t)}))," "]})]}),Object(a.jsx)("div",{className:"divider"}),Object(a.jsxs)("div",{children:[Object(a.jsxs)("div",{className:"group-header",children:[i.length," Unavailable"]}),Object(a.jsxs)("div",{className:"group-list-container",children:[i.map((function(e,t){return Object(a.jsx)("div",{children:e},t)}))," "]})]})]})]})}function X(e){var t=e.numRespondents;return Object(a.jsxs)("div",{children:[Object(a.jsx)("h3",{children:"Legend"}),Object(a.jsx)("p",{children:"The darker the color, the more people available!"}),Object(a.jsxs)("div",{className:"gradient-container",children:[Object(a.jsx)("span",{className:"gradient-text",children:"0"}),Object(a.jsx)("div",{className:"gradient"}),Object(a.jsx)("span",{className:"gradient-text",children:t})]})]})}var _=n.p+"static/media/edit.51bb6b37.png",K=n.p+"static/media/view.c19b9e35.png";function $(e){var t=e.meetingData,n=e.userData,c=e.setUserData,o=e.getMeeting,r=Object(s.useState)(!1),i=Object(u.a)(r,2),l=i[0],d=i[1],j=Object(s.useState)(null),h=Object(u.a)(j,2),m=h[0],b=h[1],p=Object(s.useState)(null!==n),v=Object(u.a)(p,2),O=v[0],g=v[1];function x(){console.log("toggling editing!"),g(!O)}function y(){return Object(a.jsx)("button",{className:"toggle-button",onClick:x,disabled:!n,children:Object(a.jsx)("img",{style:{width:"1.5rem",height:"1.5rem"},src:O?K:_})})}Object(s.useEffect)((function(){g(null!==n)}),[n]);var w="Dates"===t.surveyUsing?t.localTimes[0].format("H"):t.startTime,N=Object(s.useMemo)((function(){return function(e,t){console.log("generating raw table rows and cols!!!");for(var n=[],s=0;s<e;s++){for(var c=[],o=0;o<t;o++)c.push(Object(a.jsx)("td",{},o));n.push(Object(a.jsx)("tr",{children:c},s))}return n}(t.numTimeslots,t.numDays)}),[t.numTimeslots,t.numDays]);return Object(a.jsxs)("div",{children:[Object(a.jsx)(U.a,{fluid:!0,children:Object(a.jsxs)(A.a,{children:[Object(a.jsx)(I.a,{children:t.numRespondents>0&&Object(a.jsx)(X,{numRespondents:t.numRespondents})}),Object(a.jsxs)(I.a,{children:[Object(a.jsx)(y,{}),Object(a.jsxs)("div",{className:"container",children:[Object(a.jsx)(Z,{startingMoment:w,numTimeslots:t.numTimeslots,surveyUsing:t.surveyUsing,ToggleButton:y}),Object(a.jsx)(H,{value:null===n?null:n.available,onChange:function(e){c(Object(T.a)(Object(T.a)({},n),{},{available:e}))},days:"Dates"===t.surveyUsing?t.localTimes:t.days,colors:t.colors,setCurrentCoords:b,currentCoords:m,editing:O,children:N})]}),n&&Object(a.jsx)("button",{style:{marginTop:"2rem"},className:"button-important",value:"Save",onClick:function(){d(!0),g(!1);var e={name:n.name,available:D(n.available)};console.log("saving changes!",e,t.id),fetch(f.backendApi+"/api/people/"+t.id,{method:"PATCH",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)}).catch((function(e){console.log("fetch error!",e),d(!1)})).then((function(e){return d(!1),console.log("raw server response: ",e),204===e.status&&(o("/"+t.id),!0)}))},children:l?"SAVING...":" Save Response"})]}),Object(a.jsx)(I.a,{children:Object(a.jsx)(Q,{numRespondents:t.numRespondents,people:t.people,currentCoords:m,moments:"Dates"===t.surveyUsing?t.localTimes:{days:t.days,startTime:t.startTime},surveyUsing:t.surveyUsing})})]})}),Object(a.jsx)("div",{className:"container-bottom"})]})}var ee=n.p+"static/media/loading.4529fddf.gif";function te(){var e=Object(s.useState)(null),t=Object(u.a)(e,2),n=t[0],c=t[1],o=Object(s.useState)(null),r=Object(u.a)(o,2),i=r[0],l=r[1],j=Object(s.useState)(m.a.tz.guess()),h=Object(u.a)(j,2),v=h[0],O=h[1],g=Object(s.useState)(!1),x=Object(u.a)(g,2),y=x[0],w=x[1],N=Object(s.useState)(!1),C=Object(u.a)(N,2),M=C[0],D=C[1],k=Object(d.g)();Object(d.f)();function U(e){fetch(f.backendApi+"/api/meetings"+e,{method:"GET",headers:{"Content-Type":"application/json"}}).catch((function(e){return console.log("fetch falied!!!"),null})).then((function(e){return console.log("raw server response: ",e),e&&404!==e.status?e.json():null})).then((function(e){if(e)return 0===e.days.length&&(e.days=Object(p.a)(e.dates)),e.availableCount=function(e,t){for(var n=[],a=0;a<e;a++){for(var s=[],c=0;c<t;c++)s.push(0);n.push(s)}return n}(e.numTimeslots,e.numDays),e.numRespondents=e.people.length,e.people.forEach((function(t){t.available=S(t.available,e.numTimeslots,e.numDays),e.availableCount=function(e,t){for(var n=0;n<e.length;n++)for(var a=0;a<e[0].length;a++)e[n][a]+=t[n][a];return e}(e.availableCount,t.available)})),e.colors=E(e.availableCount,e.numRespondents),"Dates"===e.surveyUsing&&(e.localTimes=A(e.days,v)),console.log("processed data: ",e),c(e),e;w(!0)}))}function A(e,t){var n=[];return e.forEach((function(e){n.push(m.a.utc(e).tz(t))})),O(t),n}function I(){return null==i?Object(a.jsx)(R,{meetingData:n,setMeetingData:c,userData:i,setUserData:l}):Object(a.jsx)(L,{userData:i,setUserData:l,getMeeting:function(){return U("/"+n.id)},meetingId:n.id})}if(Object(s.useEffect)((function(){return function(){console.log("handling path!!!");var e=k.pathname;9===e.length?U(e):(console.log("invalid path"),w(!0))}()}),[]),Object(s.useEffect)((function(){console.log("new meeting data: ",n)}),[n]),y)return Object(a.jsx)("p",{children:"404 Invalid URL!!!"});if(null==n)return Object(a.jsxs)("div",{className:"wrapper",children:[Object(a.jsx)("div",{className:"background"}),Object(a.jsxs)("div",{className:"loading-wrapper",children:[Object(a.jsx)("h4",{children:"Loading Event..."}),Object(a.jsx)("img",{src:ee})]})]});function B(){var e={url:"https://whenmeet.io/"+n.code,title:n.name};console.log("sharing meeting",e),navigator.clipboard.writeText(e.url).then((function(){D(!0)}),(function(){}))}function W(){return Object(a.jsxs)("div",{children:[Object(a.jsxs)("h6",{style:{fontWeight:"normal"},children:["Event Link: ",Object(a.jsx)("span",{onClick:B,className:"share",children:"whenmeet.io/"+n.code})]}),Object(a.jsx)("div",{style:{opacity:M?"1":"0",marginTop:"1rem",paddingBottom:"1rem",fontWeight:"bold",fontStyle:"italic"},children:"Link Copied!"})]})}return Object(a.jsxs)("div",{className:"wrapper",children:[Object(a.jsxs)("div",{className:"header-container",children:[Object(a.jsxs)("div",{className:"title-container",children:[Object(a.jsx)("h1",{children:n.name}),Object(a.jsx)("h2",{children:n.description}),Object(a.jsx)(W,{})]}),Object(a.jsx)("div",{className:"sign-form",children:Object(a.jsx)(I,{})}),"Dates"===n.surveyUsing&&Object(a.jsxs)("div",{children:[Object(a.jsx)("span",{style:{paddingRight:"1rem"},children:"Your timezone:"}),Object(a.jsx)(b.a.Control,{as:"select",style:{maxWidth:"20rem",display:"inline"},name:"timezone",defaultValue:v,onChange:function(e){console.log("changing timezone to ",e.target.value);var t=A(n.days,e.target.value);console.log(n.localTimes),c(Object(T.a)(Object(T.a)({},n),{},{localTimes:t}))},children:m.a.tz.names().map((function(e){return Object(a.jsx)("option",{children:e})}))})]})]}),Object(a.jsx)($,{meetingData:n,userData:i,setUserData:l,getMeeting:U}),Object(a.jsx)("a",{style:{color:"var(--highlight)",paddingTop:"1.5rem",width:"10rem",margin:"auto"},href:"/",children:"Create Your Own"})]})}var ne=n(92),ae=n(94);function se(){return Object(a.jsxs)(ne.a,{bg:"light",expand:"lg",style:{zIndex:"10000"},children:[Object(a.jsx)(ne.a.Brand,{href:"/",children:"whenmeet.io"}),Object(a.jsx)(ne.a.Toggle,{"aria-controls":"basic-navbar-nav"}),Object(a.jsx)(ne.a.Collapse,{id:"basic-navbar-nav",children:Object(a.jsxs)(ae.a,{className:"mr-auto",activeKey:window.location.pathname,children:[Object(a.jsx)(ae.a.Link,{href:"/",children:"Home"}),Object(a.jsx)(ae.a.Link,{href:"/howto",children:"How to"}),Object(a.jsx)(ae.a.Link,{href:"/about",children:"About"}),Object(a.jsx)(ae.a.Link,{href:"/faq",children:"FAQ"})]})})]})}function ce(){return Object(a.jsxs)("div",{className:"footer",children:[Object(a.jsx)("p",{className:"footer-p",children:"Like whenmeet? Hit us with a FAT Donation"}),Object(a.jsx)("button",{className:"button-secondary",children:"Donate"}),Object(a.jsxs)("p",{className:"footer-p",children:["Think we can do better? ",Object(a.jsx)("a",{style:{color:"#5BC0BE"},href:"https://docs.google.com/forms/d/e/1FAIpQLScVYq6mIZ4e7V7uCpYZtcBd3OEpeCYMXVRI3cDlJcBs8UtYVg/viewform?usp=sf_link",target:"_blank",rel:"noreferrer",children:"Submit feedback"})]})]})}function oe(){return C.isMobile?Object(a.jsx)("div",{style:{height:"60vh",width:"100%",backgroundColor:"#d1a7a7",overflow:"hidden"}}):Object(a.jsx)("div",{style:{height:"100vh",width:"100%",overflow:"hidden"},children:Object(a.jsx)("svg",{viewBox:"0 0 500 150",preserveAspectRatio:"none",style:{height:"100%",width:"100%"},children:Object(a.jsx)("path",{d:"M-8.17,51.80 C158.29,85.36 344.52,28.13 529.06,67.59 L500.00,0.00 L0.00,0.00 Z",style:{stroke:"none",fill:"#d1a7a7"}})})})}function re(){return C.isMobile?Object(a.jsx)("div",{style:{height:"30rem",width:"100%",backgroundColor:"white",overflow:"hidden"}}):(console.log("returning background"),Object(a.jsx)("svg",{viewBox:"0 0 500 150",preserveAspectRatio:"xMidYMid slice",style:{height:"40rem",width:"100%"},children:Object(a.jsx)("path",{d:"M-33.07,4.25 C171.78,273.65 396.39,-137.85 604.06,176.94 L500.00,0.00 L0.00,0.00 Z",style:{stroke:"none",fill:"white"}})}))}function ie(e){switch(e.page){case"create":return Object(a.jsx)("div",{className:"background",children:Object(a.jsx)(re,{})});default:return Object(a.jsx)("div",{className:"background",children:Object(a.jsx)(oe,{})})}}r.a.render(Object(a.jsx)(c.a.StrictMode,{children:Object(a.jsxs)(l.a,{children:[Object(a.jsx)(se,{}),Object(a.jsxs)("div",{className:"app-wrapper",children:[Object(a.jsxs)(d.c,{children:[Object(a.jsx)(d.a,{exact:!0,path:"/",children:Object(a.jsxs)("div",{style:{zIndex:"1"},children:[Object(a.jsx)(ie,{page:"create"}),Object(a.jsx)(N,{})]})}),Object(a.jsx)(d.a,{path:"/about",children:Object(a.jsx)("p",{children:"ABOUT PAGE"})}),Object(a.jsx)(d.a,{path:"/howto",children:Object(a.jsx)("p",{children:"HOW TO"})}),Object(a.jsx)(d.a,{path:"/faq",children:Object(a.jsx)("p",{children:"FAQ"})}),Object(a.jsx)(d.a,{children:Object(a.jsx)(te,{})})]}),Object(a.jsx)(ce,{})]})]})}),document.getElementById("root")),i()}},[[88,1,2]]]);
//# sourceMappingURL=main.a7aa5937.chunk.js.map